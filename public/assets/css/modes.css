/* WatchNexus v3 - UI MODES
   Purpose: the UI mode should feel like a real "skin", not just density.
   Mode is set by body class: mode-command | mode-overview | mode-signal | mode-nebula
*/

/* Background overlay layer (gives "graphics" without external images) */
body{ position:relative; }
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:0;
  z-index:0;
}
body > *{ position:relative; z-index:1; }

/* Shared mode variables */
body.mode-command,
body.mode-overview,
body.mode-signal,
body.mode-nebula{
  --ui-density: 16px;
  --ui-gap: 14px;
  --ui-radius: var(--radius);
  --ui-card-shadow: var(--shadow);
}

/* Make cards + controls respond to density */
body.mode-command .card .bd,
body.mode-command .card .hd,
body.mode-command .card .ft{ padding:12px 14px; }
body.mode-command .container{ padding:14px; }
body.mode-command .tab{ padding:7px 10px; font-size:12px; }
body.mode-command .btn{ padding:8px 11px; }

body.mode-overview .card .bd,
body.mode-overview .card .hd,
body.mode-overview .card .ft{ padding:16px 18px; }
body.mode-overview .container{ padding:20px; }
body.mode-overview .tab{ padding:9px 14px; font-size:13px; }
body.mode-overview .btn{ padding:10px 14px; }

/* --- COMMAND: compact, tactical, grid overlay --- */
body.mode-command::before{
  opacity:0.18;
  background-image:
    linear-gradient(to right, rgba(255,255,255,0.08) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,0.08) 1px, transparent 1px);
  background-size: 48px 48px;
  mix-blend-mode: overlay;
}
body.mode-command .brand .name{ letter-spacing:0.35px; }
body.mode-command .card{
  box-shadow: 0 10px 34px rgba(0,0,0,0.32);
}
body.mode-command .kbd{ opacity:0.92; }

/* --- OVERVIEW: spacious, dashboard-y, softer overlay --- */
body.mode-overview::before{
  opacity:0.28;
  background-image:
    radial-gradient(600px 320px at 20% 0%, rgba(255,255,255,0.10), transparent 60%),
    radial-gradient(520px 320px at 80% 0%, rgba(255,255,255,0.08), transparent 60%);
  mix-blend-mode: overlay;
}
body.mode-overview .card .hd h2{ font-size:17px; }

/* --- SIGNAL: attention + pulse, stronger glow --- */
body.mode-signal::before{
  opacity:0.14;
  background-image:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.06) 0px,
      rgba(255,255,255,0.06) 1px,
      rgba(0,0,0,0.08) 3px,
      rgba(0,0,0,0.08) 4px
    );
  background-size: 100% 4px;
  mix-blend-mode: overlay;
}
body.mode-signal .banner,
body.mode-signal .card{
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--primary) 28%, transparent), 0 14px 44px rgba(0,0,0,0.40);
}
body.mode-signal .btn.primary{
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--primary) 40%, transparent), 0 0 22px rgba(255,255,255, calc(var(--glow) * 0.20));
}
body.mode-signal .event,
body.mode-signal .item,
body.mode-signal .ev{
  border-left: 4px solid color-mix(in srgb, var(--warn) 80%, var(--primary));
}

@keyframes wnx-signal-pulse {
  0% { box-shadow: 0 0 0 rgba(255,179,0,0); }
  50% { box-shadow: 0 0 14px rgba(255,179,0,0.55); }
  100% { box-shadow: 0 0 0 rgba(255,179,0,0); }
}
body.mode-signal .tag.airing,
body.mode-signal .badge{ animation: wnx-signal-pulse 2s infinite; }

/* --- NEBULA: cinematic gradient + stars --- */
body.mode-nebula::before{
  opacity:0.55;
  background-image:
    radial-gradient(1200px 600px at 10% -10%, rgba(255,255,255,0.10), transparent 60%),
    radial-gradient(900px 540px at 90% 0%, rgba(255,255,255,0.08), transparent 60%),
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.8), transparent 55%),
    radial-gradient(1px 1px at 70% 20%, rgba(255,255,255,0.7), transparent 55%),
    radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,0.6), transparent 55%),
    radial-gradient(2px 2px at 85% 70%, rgba(255,255,255,0.7), transparent 55%);
  background-size: auto, auto, 280px 280px, 320px 320px, 360px 360px, 420px 420px;
  mix-blend-mode: screen;
}
body.mode-nebula{
  background: linear-gradient(135deg, color-mix(in srgb, var(--bg) 85%, #1b1f3b), color-mix(in srgb, var(--bg) 85%, #2e1a47), color-mix(in srgb, var(--bg) 85%, #143a3a));
}
body.mode-nebula .card{
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 60px rgba(0,0,0,0.45);
}

/* Download menu consistency (used by calendar list view) */
.download-menu{
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow:hidden;
}
.download-menu a{ display:block; padding:10px 14px; color:inherit; text-decoration:none; }
.download-menu a:hover{ background: color-mix(in srgb, var(--primary) 12%, var(--surface)); }
